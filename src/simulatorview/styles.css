/**
 * Styles used for the simulator view.
 */
html {
  /* border: 1px dashed rebeccapurple; */
  /** General settings */
  --stroke-width: 3;
  --stroke-width-highlighted: 6;
  --font-size: 14px;
  --connection-font-size: 12px;
  --transition-time: 3s;
  /** Component's settings */
  --component-fill:                var(--vscode-editor-selectionHighlightBackground);
  --component-fill-hover:          var(--vscode-editor-selectionBackground);  
  --component-fill-inactive:       var(--vscode-editor-inactiveSelectionBackground);  
  --component-stroke:              var(--vscode-focusBorder);
  --component-text-color:          var(--vscode-descriptionForeground);
  --component-text-color-hover:    var(--vscode-errorForeground);
  --component-text-color-disabled: var(--vscode-editor-findMatchBackground);
  /** Connection's settings */
  --connection-stroke:             var(--vscode-focusBorder);
  --connection-stroke-hover:       var(--vscode-errorForeground);
  --connection-stroke-disabled:    var(--vscode-editorWidget-foreground);
  --connection-text-color:         var(--vscode-descriptionForeground);
  --connection-text-color-hover:   var(--vscode-errorForeground);
  --connection-text-color-disabled:var(--vscode-editor-findMatchBackground);
  /** Signal's settings */
  --signal-stroke:                 var(--vscode-focusBorder);
  --signal-stroke-hover:           var(--vscode-errorForeground);
  --signal-stroke-disabled:        var(--vscode-editorWidget-foreground);
  --signal-text-color:             var(--vscode-descriptionForeground);
  --signal-text-color-hover:       var(--vscode-errorForeground);
  --signal-text-color-disabled:    var(--vscode-editor-findMatchBackground);
  /** Tooltip's settings */
  --tooltip-background:            var(--vscode-editorWidget-background);
  --tooltip-border:                var(--vscode-editorWidget-border);
  --tooltip-text-color-h1:         var(--vscode-editorInfo-foreground);--tooltip-text-color-p:          var(--vscode-editorHint-foreground);
  /** Overview frame settings */
  --inst-type-text-color:          var(--vscode-editor-findMatchBackground);
  --inst-type-text-color-high:     var(--vscode-errorForeground);
  --inst-type-stroke:              var(--vscode-focusBorder);
  --inst-type-stroke-high:         var(--vscode-focusBorder);
  --inst-type-fill:                var(--vscode-editor-inactiveSelectionBackground);
  --inst-type-fill-high:           var(--vscode-editor-selectionBackground);
  --inst-val:                      var(--vscode-descriptionForeground);
  --inst-val-disabled:             var(--vscode-editor-findMatchBackground);
  --inst-val-highlighted:          var(--vscode-errorForeground);

  background-color: var(--vscode-editor-background);
}

/* #main-svg { */
  /* Scale the height of the image to fit the text editor without needing an
   * scroll bar
   */
  /* height: auto !important;  */
  /* width: 98vw !important;  */
  /* border: 1px solid blue; */
/* } */

/**
 * The look of elements in the diagram is controlled by style properties. There
 * are three classes defined for each element:
 *
 * - Default: Styles the element in its normal state. That is, the element is
 *   present in the processing of current instruction.
 *
 * - Hover: The element is under the mouse pointer. In this state, additional
 *   information like tooltips and highlighting is presented.
 *
 * - Disabled: the element is not present in the current instruction processing.
 *   In this state all the mouse events must be turned off.
 *
 * There are also different types of elements:
 * - Components.
 * - Connections.
 * - Loggers.
 *
 * Each element has its own style rules. Take into account that those styles are
 * styles on html and svg elements so change them accordingly. The way the
 * elements appear in the document is handled by draw.io which is the
 * application used to produce the svg. 
 */

/** Style for enabled components. 
  *
  * Most of the components are svg rectangles, however, special shapes like the
  * ALU are drawn as paths.
  **/
.component {
  rect {
    stroke-width: var(--stroke-width); 
    stroke: var(--component-stroke);
    fill: var(--component-fill);
    transition: stroke-width 3s;
  }
  path {
    stroke-width: var(--stroke-width);
    stroke: var(--component-stroke);
    fill: var(--component-fill);
    transition: stroke-width var(--transition-time);
  }
  text {
    fill: var(--component-text-color) !important;
    font-size: var(--font-size) !important;
  }
}

/* Style for hovered components. */
.component:hover {
  rect {
    stroke-width: var(--stroke-width-highlighted);
    fill: var(--component-fill-hover);
  }
  path {
    stroke-width: var(--stroke-width-highlighted);
    fill: var(--component-fill-hover);
  }
  text {
    fill: var(--component-text-color-hover) !important;
  }
}

 /* Style for disabled components. */
.componentDisabled {
  rect {
    opacity: 0.3;
    fill: var(--component-fill-inactive);
    pointer-events: none;
  }

  path {
    opacity: 0.3;
    fill: var(--component-fill-inactive);
  }

  text {
    fill: var(--component-text-color-disabled) !important;
    pointer-events: none !important;
  }
}

/**
 * Path style.
 *
 * Should be called path instead but that will conflict with all the other path
 * tags in the svg.
 */
.connection {
  path {
    stroke-width: var(--stroke-width);
    stroke: var(--connection-stroke);
    transition: stroke-width var(--transition-time);
  }
  text {
    fill: var(--component-text-color) !important;
    font-size: var(--connection-font-size) !important;
  }
}

.connection:hover {
  path {
    stroke-width: var(--stroke-width-highlighted);
    stroke: var(--connection-stroke-hover);
    animation: blinker var(--transition-time) linear infinite;
  }
  text {
    fill: var(--connection-text-color-hover) !important;
    font-size: var(--connection-font-size) !important;
    animation: blinker var(--transition-time) linear infinite;
  }
}

.connectionDisabled {
  path {
    opacity: 0.3;
    stroke-width: var(--stroke-width);
    stroke: var(--connection-stroke-disabled);
    pointer-events: none;
  }
  text {
    fill: var(--connection-text-color-disabled) !important;
  }
}

.muxPath {
  visibility: visible;
}

.muxPathDisabled {
  visibility: hidden ;
}

.signal {
  path {
    stroke-width: var(--stroke-width);
    stroke: var(--signal-stroke);
    fill: var(--signal-stroke);
  }
  text {
    fill: var(--signal-text-color) !important;
  }
}

.signal:hover {
  path {
    stroke-width: var(--stroke-width-highlighted);
    stroke: var(--signal-stroke-hover);
    fill: var(--signal-stroke-hover);
    animation: blinker 1.5s linear infinite;
  }
  text {
    fill: var(--signal-text-color-hover) !important;
  }
}

/* For consistency reasons this class must be exactly equal to the one above. */ 
.signalHover {
  path {
    stroke-width: var(--stroke-width-highlighted);
    stroke: var(--signal-stroke-hover);
    fill: var(--signal-stroke-hover);
    animation: blinker 1.5s linear infinite;
  }
  text {
    fill: var(--signal-text-color-hover) !important;
  }
}

.signalDisabled {
  path {
      stroke-width: var(--stroke-width);
      stroke: var(--signal-stroke-disabled);
      fill: var(--signal-stroke-disabled);
      opacity: 0.3;
      pointer-events: none
    }
    
    text {
      fill: var(--signal-text-color-disabled) !important;
    }
}

@keyframes blinker {
  25% {
    stroke-width: 4;
    opacity: 0.25;
  }
  50% {
    stroke-width: 5;
    opacity: 0.5;
  }
  75% {
    stroke-width: 6;
    opacity: 1;
  }
}

.inputText {
  text {
    fill: var(--component-text-color) !important;
    /* pointer-events: auto; */
  }
}

.inputText:hover {
  text {
    /* pointer-events: auto; */
    fill: var(--component-text-color-hover) !important;
    font-weight: 800;
  }
}

.inputTextDisabled {
  text {
    fill: var(--component-text-color-disabled) !important;
    pointer-events: none !important;
  }
}

.outputText {
  text {
    fill: var(--component-text-color) !important;
    /* pointer-events: auto; */
  }
}

.outputText:hover {
  text {
    /* pointer-events: auto; */
    fill: var(--component-text-color-hover) !important;
    font-weight: 800;
  }
}

.outputTextDisabled {
  text {
    fill: var(--component-text-color-disabled) !important;
    pointer-events: none !important;
  }
}

.instruction {
  color: var(--inst-val) !important;
  font-size: 1.4rem !important;
  font-weight: 400 !important;
}

.instructionDisabled {
  color: var(--inst-val-disabled) !important;
  opacity: 0.8;
  font-size: 1.4rem !important;
  font-weight: 400 !important;
}

.instructionHighlighted {
  color: var(--inst-val-highlighted) !important;
  font-size: 1.4rem !important;
  font-weight: 800 !important;
}

.instType {
  div {
    color: var(--inst-type-text-color) !important;
    font-weight: 400;
  }

  rect {
    opacity: 0.3;
    stroke-width: var(--stroke-width);
    stroke: var(--inst-type-stroke);
    fill: var(--inst-type-fill);
  }
}

.instTypeHigh {
  div {
    color: var(--inst-type-text-color-high) !important;
    font-weight: 800;
  }

  rect {
    stroke-width: var(--stroke-width);
    stroke: var(--inst-type-stroke-high);
    fill: var(--inst-type-fill-high);
  }
}
 
[data-cpuName="ADD4"], [data-cpuName="ADD4"]:hover { 
  path {
    fill: var(--component-text-color);
  }

  text {
    font-size: 32px !important;
  }
}

[data-cpuBusWidth] {
  visibility: hidden;
}

#tooltip {
  display: none;
  position: absolute;
  width: max-content;
  top: 0;
  left: 0;
  
  border: 2px solid var(--tooltip-border);
}

#arrow {
  position: absolute;
  background: #222;
  width: 8px;
  height: 8px;
  transform: rotate(45deg);
}

.grid-container {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  display: grid;
  grid-template-columns: minmax(0,1fr);
  grid-template-rows: auto auto auto;
  row-gap: 0.5em;
}

.grid-item-1 {
  grid-row: 1;
}

.grid-item-2 {
  grid-row: 2;
  vscode-divider {
    margin-top: 0px;
    margin-bottom: 0px;
    padding: 0px;
  }
  #main-svg {
    padding: 0px !important;
    height: auto !important; 
    width: 95vw !important; 
  }
  border-top-width: 0px;
  border-bottom-width: 0px;
}

.grid-item-3 {
  grid-row: 3;
  border-top-width: 0px;
  border-bottom-width: 0px;
}

.toolbar-container {
  display: grid;
  grid-template-columns: fit-content(25%) auto auto;
  grid-template-rows: auto;
  border-top-width: 0px;
  border-bottom-width: 0px;
}

.toolbar-left {
  grid-column: 1;
}

.toolbar-center {
  grid-column: 2;
  display: flex;
  text-align: left;
  align-items: center;
  padding-left: 10px;
  padding-right: 10px;
}

.toolbar-right {
  justify-self: right;
  grid-column: 3;
}

.simulator-header-center {
  font-family: Roboto Mono;
  display: grid;
  grid-column: auto auto;
  grid-row: auto;
  #instruction-asm {
    grid-column: 1;
    justify-self: left;
  }
  #instruction-bin {
    grid-column: 2;
    justify-self: right;
  }
}

.bottom-container {
  display: grid;
  grid-template-columns: auto auto auto;
  grid-template-rows: auto;
}

.bottom-left {
  grid-column: 1;
  justify-self: left;
}

.bottom-center {
  grid-column: 2;
  justify-self: left;
}

.bottom-right {
  grid-column: 3;
  justify-self: right;
}

#instruction-type-r,
#instruction-type-i,
#instruction-type-s,
#instruction-type-b,
#instruction-type-u,
#instruction-type-j {
  width : calc(1rem * 2);
}